(this["webpackJsonpwhatasapp-clone-1"]=this["webpackJsonpwhatasapp-clone-1"]||[]).push([[0],{141:function(e,t,s){},142:function(e,t,s){},449:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s(2),i=s.n(c),n=s(134),r=s.n(n),l=(s(141),s(27));s(142),s(143);function o(e){var t=Object(c.useContext)(v)[0];return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"leftnav",children:[Object(a.jsx)("div",{children:Object(a.jsx)("img",{className:"profile__pic",src:t.photoURL,alt:"",onClick:e.signOutGoogle})}),Object(a.jsxs)("div",{style:{display:"flex",flex:"0.3",minWidth:"90px",justifyContent:"space-around"},children:[Object(a.jsx)("i",{className:"far fa-comment-alt",style:{color:"#B1B3B5",fontSize:"1.5rem"}}),Object(a.jsx)("i",{className:"fas fa-ellipsis-v",style:{color:"#B1B3B5",fontSize:"1.5rem"}})]})]})})}function d(e){return Object(a.jsxs)("div",{className:"rightnav",children:[Object(a.jsxs)("div",{className:"currentChatHeader",children:[Object(a.jsx)("div",{children:Object(a.jsx)("img",{className:"profile__pic",src:e.selectedUser?e.selectedUser.photoURL:"",alt:""})}),Object(a.jsxs)("div",{className:"profile__info",children:[Object(a.jsx)("h3",{children:e.selectedUser?e.selectedUser.displayName:""}),Object(a.jsx)("span",{children:"online"})]})]}),Object(a.jsxs)("div",{style:{display:"flex",flex:"0.1",justifyContent:"space-around",minWidth:"90px"},children:[Object(a.jsx)("i",{className:"fas fa-search",style:{color:"#B1B3B5",fontSize:"1.5rem"}}),Object(a.jsx)("i",{className:"fas fa-ellipsis-v",style:{color:"#B1B3B5",fontSize:"1.5rem"}})]})]})}function j(e){return Object(a.jsx)("div",{className:"currentChatHeader chatCard",onClick:function(){e.setselectedUser(e.user)},children:Object(a.jsx)("div",{className:"chatFlex",children:Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsx)("div",{children:Object(a.jsx)("img",{className:"profile__pic",src:e.user.photoURL,alt:""})}),Object(a.jsx)("div",{className:"profile__info",children:Object(a.jsx)("h3",{style:{fontSize:"small"},children:e.user.displayName})})]})})})}function u(e){return Object(a.jsxs)("div",{className:"allChats",children:[Object(a.jsx)("div",{className:"searchContainer",children:Object(a.jsxs)("div",{className:"search__inputContainer",children:[Object(a.jsx)("i",{className:"fas fa-search"}),Object(a.jsx)("input",{type:"text",placeholder:"Search or start a  new chat"})]})}),Object(a.jsx)("div",{className:"ChatsScroll",children:e.activeUsers.map((function(t){return Object(a.jsx)(j,{user:t,setselectedUser:e.setselectedUser},t.uid)}))})]})}var p=s(15),h=s.n(p);s(444),s(446);h.a.initializeApp({apiKey:"AIzaSyDOvKaLJVg2bQurq4sUJF7_6cTR1tTG7zU",authDomain:"whatsappclone-1-509b9.firebaseapp.com",databaseURL:"https://whatsappclone-1-509b9.firebaseio.com",projectId:"whatsappclone-1-509b9",storageBucket:"whatsappclone-1-509b9.appspot.com",messagingSenderId:"108792138619",appId:"1:108792138619:web:2ff7d29727236073888bde"});var f=h.a.firestore(),b=h.a.auth(),m=new h.a.auth.GoogleAuthProvider,O=function(){b.signOut().then((function(e){return console.log(e)}))};function x(e){var t=Object(c.useContext)(v)[0],s=e.selectedUser?e.selectedUser.uid:"",i=Object(c.useState)([]),n=Object(l.a)(i,2),r=n[0],o=n[1],d=Object(c.useState)([]),j=Object(l.a)(d,2),u=j[0],p=j[1];function b(e){var a,c;""!==u&&(a={msg:u,sender:t.uid,reciver:s,timestamp:h.a.firestore.FieldValue.serverTimestamp()},c="chats",f.collection(c).add(a)),p("")}Object(c.useEffect)((function(){f.collection("chats").orderBy("timestamp","asc").onSnapshot((function(e){o(e.docs.map((function(e){return{data:e.data(),id:e.id}})))}))}),[]);var m=r.map((function(e){return e.data.sender===t.uid&&e.data.reciver===s||e.data.sender===s&&e.data.reciver===t.uid?Object(a.jsx)("div",{className:e.data.sender===t.uid?"sendMessage":"reciveMessage",children:Object(a.jsx)("span",{children:e.data.msg})},e.id):Object(a.jsx)("div",{},e.id)}));return Object(a.jsxs)("div",{className:"messageBar",children:[Object(a.jsxs)("div",{className:"chatMessages",children:[m,Object(a.jsx)("div",{id:"messageEnd"})]}),Object(a.jsxs)("div",{className:"messageInput",children:[Object(a.jsx)("i",{className:"fas fa-grin-alt",style:{fontSize:"1.5rem",padding:"0.5rem",paddingLeft:"1rem"}}),Object(a.jsx)("i",{className:"fas fa-paperclip",style:{fontSize:"1.5rem",padding:"0.5rem"}}),Object(a.jsx)("input",{type:"text",placeholder:"Type a message",value:u,onChange:function(e){return p(e.target.value)}}),Object(a.jsx)("i",{className:"far fa-paper-plane",style:{cursor:"pointer",fontSize:"1.5rem",padding:"0.5rem",paddingRight:"1rem"},onClick:function(){b()}})]})]})}var v=i.a.createContext();var g=function(){var e=Object(c.useState)(),t=Object(l.a)(e,2),s=t[0],i=t[1],n=Object(c.useState)([]),r=Object(l.a)(n,2),j=r[0],p=r[1],h=Object(c.useState)(),g=Object(l.a)(h,2),N=g[0],y=g[1];return Object(c.useEffect)((function(){b.onAuthStateChanged((function(e){if(e){var t={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL};i(t),y(t)}else i(null),y(null)}))}),[]),Object(c.useEffect)((function(){f.collection("activeUsers").onSnapshot((function(e){p(e.docs.map((function(e){return e.data()})))}))}),[]),Object(a.jsx)(a.Fragment,{children:s?Object(a.jsx)(v.Provider,{value:[s,j],children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(o,{signOutGoogle:O}),Object(a.jsx)(d,{selectedUser:N}),Object(a.jsx)(u,{setselectedUser:y,activeUsers:j}),Object(a.jsx)(x,{selectedUser:N})]})}):Object(a.jsx)("button",{onClick:function(){b.signInWithPopup(m).then((function(e){var t,s,a,c={uid:e.user.uid,email:e.user.email,displayName:e.user.displayName,photoURL:e.user.photoURL};t=c,s="activeUsers",a=c.uid,f.collection(s).doc(a).set(t),i(c)}))},style:{position:"absolute",top:"50%",left:"50%",backgroundColor:"#ccc",border:"none",padding:"1rem",transform:"translate(-50%, -50%)"},children:"Sign in with google"})})},N=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,450)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,n=t.getTTFB;s(e),a(e),c(e),i(e),n(e)}))};r.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(g,{})}),document.getElementById("root")),N()}},[[449,1,2]]]);
//# sourceMappingURL=main.75b8def1.chunk.js.map